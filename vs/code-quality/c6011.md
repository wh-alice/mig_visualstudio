---
title: "C6011"
ms.custom: ""
ms.date: "12/07/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-devops-test"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "C6011"
helpviewer_keywords: 
  - "C6011"
ms.assetid: 54b7bc2b-b8f5-43fc-a9a3-8189b03f249a
caps.latest.revision: 29
ms.author: "corob"
manager: "ghogen"
translation.priority.ht: 
  - "cs-cz"
  - "de-de"
  - "es-es"
  - "fr-fr"
  - "it-it"
  - "ja-jp"
  - "ko-kr"
  - "pl-pl"
  - "pt-br"
  - "ru-ru"
  - "tr-tr"
  - "zh-cn"
  - "zh-tw"
---
# C6011
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

warning C6011: dereferencing NULL pointer \<name>  
  
 This warning indicates that a null pointer is being dereferenced. If the pointer value is invalid, the result is undefined.  
  
## Example  
 The following code generates this warning because a call to malloc might return null if there is insufficient memory available:  
  
```  
#include <malloc.h>  
  
void f( )  
{   
  char *p = ( char * ) malloc( 10 );  
  *p = '\0';  
  
  // code ...  
 free( p );  
}  
```  
  
 To correct this warning, examine the pointer for null value as shown in the following code:  
  
```  
#include <malloc.h>  
void f( )  
{  
  char *p = ( char * )malloc ( 10 );  
  if ( p )   
  {  
    *p = '\0';  
    // code ...  
  
    free( p );  
  }  
}  
```  
  
 You must allocate memory inside the function whose parameters are annotated by using the Null property in a Pre condition before dereferencing the parameter. The following code generates warning C6011 because an attempt is made to dereference a null pointer (`pc`) inside the function without first allocating memory:  
  
```  
#include <sal.h>  
using namespace vc_attributes;  
void f([Pre(Null=Yes)] char* pc)  
{  
  *pc='\0'; // warning C6011 - pc is null  
  // code ...  
}  
```  
  
 The use of malloc and free have many pitfalls in terms of memory leaks and exceptions. To avoid these kinds of leaks and exception problems altogether, use the mechanisms that are provided by the C++ Standard Template Library (STL). These include [shared_ptr](http://msdn.microsoft.com/library/1469fc51-c658-43f1-886c-f4530dd84860), [unique_ptr](http://msdn.microsoft.com/library/acdf046b-831e-4a4a-83aa-6d4ee467db9a), and [vector](../Topic/%3Cvector%3E.md). For more information, see [Smart Pointers](http://msdn.microsoft.com/library/909ef870-904c-49b6-b8cd-e9d0b7dc9435) and [C++ Standard Library](http://msdn.microsoft.com/library/a37d3ba3-58af-47c7-9ee2-441ccd7b77ee).  
  
## See Also  
 [Annotation Overview](http://msdn.microsoft.com/en-us/2345380e-2eeb-4107-907f-6e8b809c2643)   
 [Null](http://msdn.microsoft.com/en-us/632f3684-60a0-45be-aeb1-be1521e94d88)   
 [NULL](http://msdn.microsoft.com/library/f9aac2a0-4f79-423f-8738-a76dccc0b1c3)   
 [Indirection and Address-of Operators](http://msdn.microsoft.com/library/10d62b00-12ba-4ea9-a2d5-09ac29ca2232)   
 [malloc](http://msdn.microsoft.com/library/144fcee2-be34-4a03-bb7e-ed6d4b99eea0)   
 [free](http://msdn.microsoft.com/library/74ded9cf-1863-432e-9306-327a42080bb8)